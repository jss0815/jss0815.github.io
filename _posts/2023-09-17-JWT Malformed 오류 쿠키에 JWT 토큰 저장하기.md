---
title: JWT Malformed 오류 쿠키에 JWT 토큰 저장하기
date: 2023-09-17 20:00:00 +0900
categories:
  - JavaScript
tags:
  - JSON
  - JWT
  - Malformed
---

## 문제 개요

JSON Web Token(JWT)은 인증과 정보 교환을 위한 방식 중 하나입니다. 이 문서에서는 "JWT Malformed"라는 오류와 이를 어떻게 해결할 수 있는지를 중심으로 설명합니다. 이 오류는 주로 JWT 토큰이 잘못 구성되었을 때 나타납니다. "Malformed"라는 단어는 '형식에 맞지 않는'이라는 뜻입니다.

## 원인 분석

"JWT Malformed" 오류가 발생하는 주된 원인은 다음과 같습니다.

1. **토큰 형식 오류**: JWT 토큰은 일반적으로 `header.payload.signature` 형식을 가집니다. 이 중 하나라도 잘못되면 오류가 발생합니다.
2. **인코딩 문제**: JWT의 각 부분은 Base64로 인코딩되어야 합니다. 인코딩이 잘못되면 문제가 발생할 수 있습니다.
3. **데이터 무결성**: Signature 부분은 토큰의 무결성을 확인하는데 사용됩니다. 이것이 서버와 일치하지 않으면 오류가 발생합니다.

## 해결 방안

### 토큰 형식 검증

먼저, 토큰이 올바른 형식을 가지고 있는지 확인하세요. 각 부분이 올바르게 구분되어 있는지, 누락되거나 추가된 부분이 없는지 확인해보세요.

### 인코딩 확인

JWT 토큰의 각 세그먼트(header, payload, signature)가 올바르게 Base64 인코딩되어 있는지 확인해야 합니다.

### 서버와 일치 검사

마지막으로, 서버에서 사용하는 비밀 키나 알고리즘과 토큰의 signature가 일치하는지 확인하세요. 일치하지 않으면 "JWT Malformed" 오류가 발생할 확률이 높습니다.

## 정리

"JWT Malformed"는 다양한 원인으로 발생할 수 있습니다. 토큰의 형식, 인코딩 방식, 그리고 서버와의 일치 여부 등을 철저히 검토해야 이 문제를 해결할 수 있습니다. 이러한 단계를 거쳐 문제를 식별하면, 안전하고 효율적인 웹 서비스를 제공하는 데 한 걸음 더 다가갈 수 있습니다.